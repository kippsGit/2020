
<html>
<head>
	<title>K.P.G.P.& M.B.</title>
<style type="text/css">
	body{
		margin: 0;
		padding: 0;
	}
</style>
</head>
<body>
<center>
<canvas id="canvas"></canvas>
<script type="text/javascript">
	let canvas = document.querySelector("#canvas"),
		c = canvas.getContext("2d"),
		/*canvas.width = window.innerWidth;
		canvas.height = window.innerHeight;*/
		frame = 0;
		frame2 = 0;

		canvas.width = 1100;
		canvas.height = 1764;

		canvas_width = canvas.width;
		canvas_height = canvas.height;

		let groundImg = new Image(),
			treeImg = new Image(),
			backgroundImage = new Image(),
			carImage = new Image(),
			boatImage = new Image(),
			titleImage = new Image();

		groundImg.src = "ground.png";
		treeImg.src = "tree.png";
		backgroundImage.src = "background.png";
		boatImage.src = "boat.png";
		titleImage.src = "title.png";

		let carCollection = ["redCar.png", "blueCar.png", "yellowCar.png", "carrYellow.png"],
			CCindex = Math.floor(Math.random()*carCollection.length);
			carImage.src = carCollection[CCindex];

		let title = {
			w: 700,
			h: 350,
			posX: 0,
			posY: 0,

			draw: function(){
					
				this.posX = canvas.width/2-this.w/2;
				this.posY = canvas.height/2-this.h/2;

				/*c.fillStyle = "red";
				c.fillRect(this.posX, this.posY, this.w, this.h);*/

				c.drawImage(titleImage, 0, 0, 700, 350, this.posX, this.posY, this.w, this.h)
			}
		}
		/*console.log(canvas.width/2-title.w/2, canvas.height/2-title.h/2-title.h/2)

		canvas.addEventListener("mousemove",(e)=>{
			let cX = e.clientX,
				cY = e.clientY;

			console.log("client X: " + cX, "client Y: " + cY)
		})*/
		let backGround = {

			posX: 0,
			posY: 0,
			index: 0,

			update: function(){
				if(frame % 24 == 0){
					this.index += 1500;
					if(this.index > 3000){
						this.index = 0;
					}	
				}
				
			},

			draw: function(){
				/*c.fillStyle = "gray";
				c.fillRect(this.posX, this.posY, canvas.width, canvas.height);*/
				c.drawImage(backgroundImage, this.index, 0, canvas.width, canvas.height, this.posX, this.posY, canvas.width, canvas.height);

				this.update();
			}
		}

		let ground = {
			posX: 0,
			posY: 0,

			draw: function(){

				this.posX = 0;
				this.posY = canvas.height/2 - canvas.height/100;

				/*c.fillStyle = "brown";
				c.fillRect(this.posX,this.posY, canvas.width, canvas.height);*/
				c.drawImage(groundImg, 0, 0, canvas.width/2, 480, this.posX, this.posY, canvas.width, 900);

			}
		}

		let tree = {
			posX: canvas.width/2,
			posY: 0,

			draw: function(){
				/*c.fillStyle = "green";
				c.fillRect(this.posX, this.posY, canvas.width - canvas.width/3, canvas.height/2 + canvas.height/5);*/
				c.drawImage(treeImg, 0, 0, canvas.width - canvas.width/3, canvas.height/2 + canvas.height/5, this.posX, this.posY - canvas.height/5, 1500, 3000)
			}

		}

		let carObject = function(){
			this.showSig = 0;
			this.showSigMax = Math.floor(Math.random()*300);

			this.index = 0;
			this.siz = {
				w: 800,
				h: 450
			}
			this.pos = {
				x: canvas.width,
				y: canvas.height / 2 + canvas.height / 6
			}
			this.vel = {
				x: -20,
				y: 0
			}
			this.update = ()=>{
				this.pos.x += this.vel.x;

				this.index += 288;

				this.showSig++;


				//console.log("max: " + this.showSigMax, this.showSig)
				if(this.pos.x <= 0 - this.siz.w){
					if(this.showSig >= this.showSigMax){
						this.pos.x = canvas.width;
						CCindex = Math.floor(Math.random()*carCollection.length);
						carImage.src = carCollection[CCindex];
						this.vel.x = Math.floor(Math.random()*-50 + -20);

						this.showSig = 0;
						this.showSigMax = Math.floor(Math.random()*300);
					}
						

				}

				if(this.index > 864	){
					this.index = 0;
				}
			}
			this.draw = ()=>{
				/*c.fillStyle = "blue";
				c.fillRect(this.pos.x, this.pos.y, this.siz.w, this.siz.h);*/

				c.drawImage(carImage, this.index, 0, 288, 144, this.pos.x, this.pos.y, this.siz.w, this.siz.h);

				this.update();
			}

		}; let car = new carObject();

		let boatObject = function(){
			this.index = 0;
			this.siz = {
				w: 500,
				h: 300
			}
			this.pos = {
				x: 0 - this.siz.w,
				y: canvas.height / 4
			}
			this.vel = {
				x: 5,
				y: 0
			}
			this.update = ()=>{

				this.pos.x += this.vel.x;

				if(frame % 6 == 0){
					this.index += 624;
					if(this.index > 1248){
						this.index = 0;
					}
				}

				if(this.pos.x >= canvas.width){
					this.pos.x = 0 - this.siz.w;
				}
			}
			this.draw = ()=>{
				/*c.fillStyle = "black";
				c.fillRect(this.pos.x, this.pos.y, this.siz.w, this.siz.h);*/

				c.drawImage(boatImage, this.index, 0, 624, 230, this.pos.x, this.pos.y, this.siz.w, this.siz.h)

				this.update();
			}

		}; let boat = new boatObject();


		
		//game loop
		setInterval(()=>{
			frame++;
			frame2++;

			c.clearRect(0,0,canvas.width,canvas.height);
			backGround.draw();
			boat.draw();
			ground.draw();
			tree.draw();
			/*title.draw();*/
			car.draw();
			

		}, 60)

		function adjustScreen(){

			canvas_width = window.innerWidth;
			canvas_height = window.innerHeight;

			let ratio = 16 / 9;

			if(canvas_width < canvas_height / ratio){
				canvas_height = canvas_width * ratio;
			}else{
				canvas_width = canvas_height / ratio;
			}

			canvas.style.width = "" + canvas_width + "px";
			canvas.style.height = "" + canvas_height  + "px";
		}
		adjustScreen();
		window.addEventListener("resize", ()=>{
			adjustScreen();
		})
</script>
</body>
</html>